\documentclass{article}[11pt]

\include{./../../preamble.tex}
\include{./../../tikzlib/preamble.tex}
\include{./../../tikzlib/figs/nmos-3t-testbench-a.tex}

\include{./../../tikzlib/figs/square-law-regions-a.tex}

\include{./../../tikzlib/figs/square-law-regions-sweep-vgs-a.tex}
\include{./../../tikzlib/figs/square-law-transfer-vds-a.tex}
\include{./../../tikzlib/figs/square-law-transfer-vds-b.tex}

\include{./../../tikzlib/figs/square-law-regions-sweep-vds-a.tex}
\include{./../../tikzlib/figs/square-law-output-a.tex}

\include{./../../tikzlib/figs/square-law-gm-a.tex}

\include{./../../tikzlib/figs/square-law-output-clm-a.tex}

\include{./../../tikzlib/figs/mosfet-equivalent-circuit-b.tex}


\def \title  {MOSFET Square Law}
\def \date   {May 20, 2025}

\def \pdfurl {https://mschweikardt.github.io/ee-notes/mosfet-square-law.pdf}
\def \srcurl {https://github.com/mschweikardt/ee-notes/tree/main/notes/mosfet-square-law}

\usepackage[scale=5]{draftwatermark}

\begin{document}

\notetitle

\section{Introduction}

The \textit{square law} is the most simple \gls{mosfet} model.
It has only two model parameters,
\textit{threshold voltage} $V_{\mathrm{TH}}$ (unit \si{\volt})%
\footnote{Some abbreviate the threshold voltage with 
the variable $V_{\mathrm{T}}$ \cite{allen-cmosancirdes-12}.}
and 
\textit{transconductance parameter}~$K'$ 
(pronounced "k prime", unit \si{\ampere\per\volt\squared}).
$K'$ is the product of the mobility of carriers in the channel $\mu_0$ 
(unit \si{\meter\squared\per\volt\per\second}) and the 
specific oxide capacitance $C_{\mathrm{ox}}$ 
(unit \si{\farad\per\meter\squared}) \cite{allen-cmosancirdes-12}, i.e.,
\begin{equation}
K' = \mu_0 \cdot C_{\mathrm{ox}}.
\end{equation}
The square law is inaccurate for state of the art semiconductor devices, 
but it is still a good starting point to understand the behavior of 
a transistor quantitatively.

\medskip

The model describes the drain current $I_{\mathrm{D}}$ as
a function of the model parameters, the applied voltages
$V_{\mathrm{DS}}$ and $V_{\mathrm{GS}}$ and the sizing
parameters \textit{width} $W$ and \textit{length} $L$, 
a.k.a. the I-V characteristic.
All relevant voltages and the current are illustrated in 
Fig.~\ref{fig:squarelawschematic}.

\begin{figure}[H]
  \centering
  \begin{circuitikz}
    \NmosThreetTestbenchA
  \end{circuitikz}
  \caption{Definition of $V_{\mathrm{GS}}$, $V_{\mathrm{DS}}$ and $I_{\mathrm{D}}$}
  \label{fig:squarelawschematic}
\end{figure}


\section{Regions}

The drain current $I_{\mathrm{D}}$ of the \gls{mosfet} is described as a 
piecewise function.
These "pieces" (a.k.a. operating regions) depend on the applied voltages 
$V_{\mathrm{DS}}$, $V_{\mathrm{GS}}$ and the model parameter 
$V_{\mathrm{TH}}$.
Tab.~\ref{tab:regions} explains these regions. 

\begin{table}[H]
\centering
\caption{\gls{mosfet} operating regions}
\begin{tabular}{cccc}
\toprule
Mode                 & $V_{\mathrm{GS}}$      & $V_{\mathrm{DS}}$                     & $I_{\mathrm{D}}$         \\ \midrule
\textit{off}         & $<V_{\mathrm{TH}}$     & all                                   & 0                        \\ 
\textit{ohmic}       & $\geq V_{\mathrm{TH}}$ & $< V_{\mathrm{GS}}-V_{\mathrm{TH}}$   & \eqref{eq:id-ohmic}      \\ 
\textit{saturation}  & $\geq V_{\mathrm{TH}}$ & $\geq V_{\mathrm{GS}}-V_{\mathrm{TH}}$& \eqref{eq:id-saturation} \\ \toprule
\end{tabular}
\label{tab:regions}
\end{table}

These regions are called \textit{off}, \textit{ohmic} (a.k.a. \textit{triode}) 
and \textit{saturation} (a.k.a. \textit{active}).
As an alternative, the \textit{mode of operation} can be illustrated in the
$V_{\mathrm{GS}}$-$V_{\mathrm{DS}}$ plane 
(Fig.~\ref{fig:squarelawregionplot}) .
Each mode of operations spans an area in the in this plot.

\begin{figure}[H]
  \centering
  \begin{tikzpicture}[scale=1.2]
    \SquareLawRegionsA
  \end{tikzpicture}
  \caption{Regions in the $V_{\mathrm{GS}}$-$V_{\mathrm{DS}}$ plane}
  \label{fig:squarelawregionplot}
\end{figure}

The diagonal boundary  (a.k.a. \textit{pinch-off} point) in
Fig.~\ref{fig:squarelawregionplot} is abbreviated as overdrive voltage%
\footnote{Some analog designers use the overdrive voltage voltage as knob 
(\SI{150}{\milli\volt}-\SI{400}{\milli\volt}).}
\begin{equation}\label{eq:vov}
  V_{\mathrm{OV}} = V_{\mathrm{GS}}-V_{\mathrm{TH}}.
\end{equation}

\section{IV-Equations}

When the device is in \textit{off} mode, the drain current $I_{\mathrm{D}}$
is zero.
In \textit{ohmic} mode, the drain current is
\begin{equation}\label{eq:id-ohmic}
  I_{\mathrm{D}} =  K' \ \frac{W}{L} 
    \left((V_{\mathrm{GS}}-V_{\mathrm{TH}})V_{\mathrm{DS}} 
      - \frac{1}{2} V_{\mathrm{DS}}^2\right),
\end{equation}
while it is 
\begin{equation}\label{eq:id-saturation}
  I_{\mathrm{D}} = \frac{1}{2} \ K' \ \frac{W}{L} (V_{\mathrm{GS}}-V_{\mathrm{TH}})^2
\end{equation}
when it is in \textit{saturation} mode.
From \eqref{eq:id-saturation} we can see that $I_{\mathrm{D}}$ does 
not depend on $V_{\mathrm{DS}}$ in \textit{saturation} mode.
With the definition made in \eqref{eq:vov} we can simplify 
\eqref{eq:id-saturation} to
\begin{equation}\label{eq:id-saturation-vov}
I_{\mathrm{D}} = \frac{1}{2} \ K' \ \frac{W}{L} V_{\mathrm{OV}}^2.
\end{equation}
We may also set
\begin{equation}\label{eq:beta}
\beta = K' \ \frac{W}{L}
\end{equation}
for simplification.

\section{Transfer Characteristic}

The \textit{transfer characteristic} describes the drain current 
$I_{\mathrm{D}}$ (=output) as a function of $V_{\mathrm{GS}}$ (=input) 
while keeping $V_{\mathrm{DS}}$ constant.
We can illustrate that by drawing horizontal lines in the 
$V_{\mathrm{GS}}$-$V_{\mathrm{DS}}$ plane 
(Fig.~\ref{fig:squarelawregionplottransf}).
Depending on the value of $V_{\mathrm{DS}}$, the 
\textit{transfer characteristic} 
crosses all regions ($V_{\mathrm{DS}}=V_{\mathrm{DS,1}} < V_{\mathrm{TH}}$)
or only two regions ($V_{\mathrm{DS}}=V_{\mathrm{DS,2}} > V_{\mathrm{TH}}$).

\begin{figure}[H]
  \centering
  \begin{tikzpicture}[scale=1.2]
    \SquareLawRegionsSweepVgsA
  \end{tikzpicture}
  \caption{Locus of transfer characteristic in the $V_{\mathrm{GS}}$-$V_{\mathrm{DS}}$ plane}
  \label{fig:squarelawregionplottransf}
\end{figure}

Fig. \ref{fig:squarelawtransf} shows these two transfer characteristics.
The transfer characteristic is constant (zero) in the \textit{off} region,
quadratic ($\sim V_{\mathrm{GS}}^2$) in the \textit{saturation} region and 
linear ($\sim V_{\mathrm{GS}}$) in the \textit{ohmic} region.

\begin{figure}[H]
  \centering
  \begin{subfigure}[b]{0.475\textwidth}
      \centering
      \begin{tikzpicture}[scale=1.2]
        \SquareLawTransferVdsA
      \end{tikzpicture}
      \caption{$V_{\mathrm{DS}}=V_{\mathrm{DS,1}} < V_{\mathrm{TH}}$}
  \end{subfigure}%
  \hfill
  \begin{subfigure}[b]{0.475\textwidth}
      \centering
      \begin{tikzpicture}[scale=1.2]
        \SquareLawTransferVdsB
      \end{tikzpicture}
      \caption{$V_{\mathrm{DS}}=V_{\mathrm{DS,2}} > V_{\mathrm{TH}}$}
  \end{subfigure}
  \caption{Transfer characteristic $I_{\mathrm{D}} = f(V_{\mathrm{GS}})$}
  \label{fig:squarelawtransf}
\end{figure}


\section{Output Characteristic}

The \textit{output characteristic} explains the relation between the drain 
current $I_{\mathrm{D}}$ (=current at output) and the Drain-Source 
voltage $V_{\mathrm{DS}}$ (=voltage at output) while keeping 
$V_{\mathrm{GS}}$ constant.
We can illustrate that by drawing vertical lines in the 
$V_{\mathrm{GS}}$-$V_{\mathrm{DS}}$ plane in 
Fig.~\ref{fig:squarelawregionplotout}.
The three vertical lines in correspond to 
three different Gate-Source voltages.
$V_{\mathrm{GS,1}}$ is less than the threshold voltage 
$V_{\mathrm{TH}}$, while $V_{\mathrm{GS,2}}$ and 
$V_{\mathrm{GS,3}}$ are greater.

\begin{figure}[H]
  \centering
  \begin{tikzpicture}[scale=1.2]
    \SquareLawRegionsSweepVdsA
  \end{tikzpicture}
  \caption{Locus of output characteristic in the $V_{\mathrm{GS}}$-$V_{\mathrm{DS}}$ plane}
  \label{fig:squarelawregionplotout}
\end{figure}

Fig. \ref{fig:squarelawout} plots the output characteristic for the different
Gate-Source voltages shown in Fig.~\ref{fig:squarelawregionplotout}.
The drain current is zero for $V_{\mathrm{GS,1}}<V_{\mathrm{TH}}$.
The output characteristic is a piecewise function for $V_{\mathrm{GS,2}}$
and $V_{\mathrm{GS,3}}$.
When $V_{\mathrm{DS}}$ is low, the output characteristic has a 
parabolic shape and is in the \textit{ohmic} mode.
As $V_{\mathrm{DS}}$ increases, the drain current $I_{\mathrm{D}}$
gets constant and is in \textit{saturation}.

\begin{figure}[H]
  \centering
  \begin{tikzpicture}[scale=1.2]
    \SquareLawOutputA
  \end{tikzpicture}
  \caption{Output characteristic $I_{\mathrm{D}} = f(V_{\mathrm{DS}})$}
  \label{fig:squarelawout}
\end{figure}

The boundary between \textit{ohmic} and \textit{saturation} 
(dashed line in Fig. \ref{fig:squarelawout}) is given by 
\begin{equation}
  V_{\mathrm{DS}} \stackrel{!}{=} V_{\mathrm{OV}} 
                  \stackrel{\eqref{eq:vov}}{=} V_{\mathrm{GS}} - V_{\mathrm{TH}}.
\end{equation}

\section{Transconductance}

The \textit{transconductance} $g_{\mathrm{m}}$ of the transistor is the 
derivative of the drain current $I_{\mathrm{D}}$ wrt. to 
$V_{\mathrm{GS}}$, evaluated at a given $V_{\mathrm{GS}}$.
(Fig.~\ref{fig:squarelaw-gm}).

\begin{figure}[H]
  \centering
  \begin{tikzpicture}[scale=1.2]
    \SquareLawGmA
  \end{tikzpicture} 
  \caption{Transconductance $g_{\mathrm{m}}$}
  \label{fig:squarelaw-gm}
\end{figure}

This value is needed for the \textit{small-signal analysis}.
In the \textit{saturation} region, the 
\textit{transconductance} $g_{\mathrm{m}}$ is given by \eqref{eq:gm}.

\begin{equation}\label{eq:gm}
g_{\mathrm{m}} = \frac{\mathrm{d} I_{\mathrm{D}}}{\mathrm{d} V_{\mathrm{GS}}} 
               = K' \ \frac{W}{L} (V_{\mathrm{GS}}-V_{\mathrm{TH}}) 
               = \frac{2 I_{\mathrm{D}}}{V_{\mathrm{GS}}-V_{\mathrm{TH}}}  
               = \sqrt{2 K' \frac{W}{L} I_{\mathrm{D}}}
\end{equation}

\section{Channel Length Modulation}

The ideal behavior of a \gls{mosfet} as explained above is affected by
several parasitic effects.
One major parasitic effect is \gls{clm}.

\medskip

We may describe this effect by multiplying the function of the ideal drain
current $I_{\mathrm{D}}$ with the term 
\begin{equation}
 \left(1 + \lambda \cdot V_{\mathrm{DS}}\right).
\end{equation}
$\lambda$ is a technology parameter and decreases for bigger lengths $L$.
The additional term converges to one (no effect) as we increase the
length.

\medskip

Fig.~\ref{fig:squarelaw-output-clm} shows the output characteristic 
including \gls{clm}.
The drain current $I_{\mathrm{D}}$ is not constant in \textit{saturation},
we see a linear increase.
We refer to the slope in \textit{saturation} as Drain-Source conductance
$g_{\mathrm{DS}}$.

\begin{figure}[H]
  \centering
  \begin{tikzpicture}[scale=1.2]
    \SquareLawOutputClmA
  \end{tikzpicture} 
  \caption{Output characteristic including \gls{clm}}
  \label{fig:squarelaw-output-clm}
\end{figure}

\section{Small-Signal Model}

\begin{figure}[H]
  \centering
  \begin{circuitikz}
    \MosfetEqCircB
  \end{circuitikz} 
  \caption{Small-signal model}
  \label{fig:squarelaw-small-signal}
\end{figure}


\printbibliography

\end{document}