\documentclass{article}[11pt]

\include{./../../preamble.tex}
\include{./../../preamble-notes.tex}

\include{./../../tikzlib/preamble.tex}


\def \title  {MOSFET Square Law}
\def \date   {September 24, 2025}

\def \pdfurl {https://mschweikardt.github.io/ee-notes/mosfet-square-law.pdf}
\def \srcurl {https://github.com/mschweikardt/ee-notes/tree/main/notes/mosfet-square-law}

\usepackage[scale=5]{draftwatermark}

\begin{document}

\notetitle

\section{Introduction}

The \textit{square law} is the most simple \gls{mosfet} model.
It has only two model parameters,
\textit{threshold~voltage} $V_{\mathrm{T}}$ (unit \si{\volt})%
and \textit{transconductance parameter}~$K'$ 
(pronounced "k prime", unit~\si{\ampere\per\volt\squared}).
$K'$ is the product of the mobility of carriers in the channel $\mu_0$ 
(unit~\si{\meter\squared\per\volt\per\second}) and the 
specific oxide capacitance $C_{\mathrm{ox}}$ 
(unit~\si{\farad\per\meter\squared}) \cite{allen-cmosancirdes-12}, i.e.,
\begin{equation}
K' = \mu_0 \cdot C_{\mathrm{ox}}.
\end{equation}
We may also add 'N' or 'P' as subscript to these variables to indicate whether 
it is an n-channel \gls{mosfet} (NMOS) or an n-channel \gls{mosfet} (PMOS).

The square law is inaccurate for state of the art semiconductor devices, 
but it is still a good starting point to understand the behavior of 
a transistor quantitatively.

\medskip

The model describes the drain current $I_{\mathrm{D}}$ as
a function of the model parameters, the applied voltages
$V_{\mathrm{DS}}$ and $V_{\mathrm{GS}}$ and the sizing
parameters \textit{width} $W$ and \textit{length} $L$, 
a.k.a. the I-V characteristic.
All relevant voltages and the current are illustrated in 
Fig.~\ref{fig:squarelawschematic}.

\begin{figure}[H]
  \centering
    \begin{subfigure}[b]{0.475\textwidth}
        \centering
        \begin{circuitikz}[scale=1.2]
          \input{./../../tikzlib/figs/nmos-3t-testbench-a.tex}
        \end{circuitikz}
        \caption{NMOS}
    \end{subfigure}%
    \hfill
    \begin{subfigure}[b]{0.475\textwidth}
        \centering
        \begin{circuitikz}[scale=1.2]
          \input{./../../tikzlib/figs/pmos-3t-testbench-a.tex}
        \end{circuitikz}
        \caption{PMOS}
    \end{subfigure}
  \caption{Definition of $V_{\mathrm{GS}}$, $V_{\mathrm{DS}}$ and $I_{\mathrm{D}}$}
  \label{fig:squarelawschematic}
\end{figure}

The voltages $V_{\mathrm{GS}}$ and $V_{\mathrm{DS}}$, the drain current
$I_{\mathrm{D}}$ and the model parameters $V_{\mathrm{T}}$ and $K'$
are $\geq 0$ for NMOS devices and $\leq 0$ for PMOS devices.
In the following, we will consider only NMOS devices.


\section{Regions}

The drain current $I_{\mathrm{D}}$ of the \gls{mosfet} is described as a 
piecewise function.
These "pieces" (a.k.a. operating regions) depend on the applied voltages 
$V_{\mathrm{DS}}$, $V_{\mathrm{GS}}$ and the model parameter 
$V_{\mathrm{T}}$.
Tab.~\ref{tab:regions} explains these regions. 

\begin{table}[H]
\centering
\caption{\gls{mosfet} (NMOS) operating regions}
\begin{tabular}{cccc}
\toprule
Mode                 & $V_{\mathrm{GS}}$     & $V_{\mathrm{DS}}$                    & $I_{\mathrm{D}}$         \\ \midrule
\textit{off}         & $<V_{\mathrm{T}}$     & all                                  & $=0$                     \\ 
\textit{ohmic}       & $\geq V_{\mathrm{T}}$ & $< V_{\mathrm{GS}}-V_{\mathrm{T}}$   & \eqref{eq:id-ohmic}      \\ 
\textit{saturation}  & $\geq V_{\mathrm{T}}$ & $\geq V_{\mathrm{GS}}-V_{\mathrm{T}}$& \eqref{eq:id-saturation} \\ \toprule
\end{tabular}
\label{tab:regions}
\end{table}

These regions are called \textit{off} (a.k.a. \textit{cutoff}), 
\textit{ohmic} (a.k.a. \textit{triode}) 
and \textit{saturation} (a.k.a. \textit{active}).
As an alternative, the \textit{mode of operation} can be illustrated in the
$V_{\mathrm{GS}}$-$V_{\mathrm{DS}}$ plane 
(Fig.~\ref{fig:squarelawregionplot}) .
Each mode of operations spans an area in the in this plot.

\begin{figure}[H]
  \centering
  \begin{tikzpicture}[scale=1.2]
    \input{./../../tikzlib/figs/square-law-regions-a.tex}
  \end{tikzpicture}
  \caption{Regions in the $V_{\mathrm{GS}}$-$V_{\mathrm{DS}}$ plane}
  \label{fig:squarelawregionplot}
\end{figure}

The diagonal boundary  (a.k.a. \textit{pinch-off} point) in
Fig.~\ref{fig:squarelawregionplot} is abbreviated as overdrive voltage
\begin{equation}\label{eq:vov}
  V_{\mathrm{OV}} := V_{\mathrm{GS}}-V_{\mathrm{T}}.
\end{equation}
Some analog designers use the overdrive voltage as knob 
(\SI{150}{\milli\volt}-\SI{400}{\milli\volt}) for sizing of their transistors.
Different authors may use different terms for the same value,
e.g., $V_{\mathrm{DS,sat}}$ in \cite{baker-cmoscircdesnsim-10}, 
$V_{\mathrm{DS}}(\mathrm{sat})$ in \cite{allen-cmosancirdes-12},
$V_{\mathrm{D,sat}}$ in \cite{razavi-desanacmosic-15}, 
$V_{\mathrm{ON}}$ in \cite{allen-cmosancirdes-12},
$V_{\mathrm{EFF}}$/$V_{\mathrm{eff}}$ in 
\cite{binkley-tradeoffoptanalogcmos-08,johnsmartin-aicd-12} and
$V_{\mathrm{GT}}$ in \cite{huijsing-opamp-17}.

\section{IV-Equations}

When the device is in \textit{off} mode, the drain current $I_{\mathrm{D}}$
is zero.
In \textit{ohmic} mode, the drain current is
\begin{equation}\label{eq:id-ohmic}
  I_{\mathrm{D}} =  K' \ \frac{W}{L} 
    \left((V_{\mathrm{GS}}-V_{\mathrm{T}})V_{\mathrm{DS}} 
      - \frac{1}{2} V_{\mathrm{DS}}^2\right),
\end{equation}
while it is 
\begin{equation}\label{eq:id-saturation}
  I_{\mathrm{D}} = \frac{1}{2} \ K' \ \frac{W}{L} (V_{\mathrm{GS}}-V_{\mathrm{T}})^2
\end{equation}
when it is in \textit{saturation} mode.
From \eqref{eq:id-saturation} we can see that $I_{\mathrm{D}}$ does 
not depend on $V_{\mathrm{DS}}$ in \textit{saturation} mode.
With the definition made in \eqref{eq:vov}, we can simplify 
\eqref{eq:id-saturation} to
\begin{equation}\label{eq:id-saturation-vov}
I_{\mathrm{D}} = \frac{1}{2} \ K' \ \frac{W}{L} V_{\mathrm{OV}}^2.
\end{equation}
We may also substitute the \textit{shape}
\begin{equation}\label{eq:shape}
S = \ \frac{W}{L}
\end{equation}
and \textit{scaled transconductance parameter}
\begin{equation}\label{eq:beta}
\beta = K' \ \frac{W}{L} = K' \ S
\end{equation}
in the equations above for simplification.

\section{Transfer Characteristic}

The \textit{transfer characteristic} describes the drain current 
$I_{\mathrm{D}}$ (=output) as a function of $V_{\mathrm{GS}}$ (=input) 
while keeping $V_{\mathrm{DS}}$ constant.
We can illustrate that by drawing horizontal lines in the 
$V_{\mathrm{GS}}$-$V_{\mathrm{DS}}$ plane 
(Fig.~\ref{fig:squarelawregionplottransf}).
Depending on the value of $V_{\mathrm{DS}}$, the 
\textit{transfer characteristic} 
crosses all regions ($V_{\mathrm{DS}}=V_{\mathrm{DS,1}} < V_{\mathrm{T}}$)
or only two regions ($V_{\mathrm{DS}}=V_{\mathrm{DS,2}} > V_{\mathrm{T}}$).

\begin{figure}[H]
  \centering
  \begin{tikzpicture}[scale=1.2]
    \input{./../../tikzlib/figs/square-law-regions-sweep-vgs-a.tex}
  \end{tikzpicture}
  \caption{Locus of transfer characteristic in the $V_{\mathrm{GS}}$-$V_{\mathrm{DS}}$ plane}
  \label{fig:squarelawregionplottransf}
\end{figure}

Fig. \ref{fig:squarelawtransf} shows these two transfer characteristics.
The transfer characteristic is constant (zero) in the \textit{off} region,
quadratic ($\sim V_{\mathrm{GS}}^2$) in the \textit{saturation} region and 
linear ($\sim V_{\mathrm{GS}}$) in the \textit{ohmic} region.

\begin{figure}[H]
  \centering
  \begin{subfigure}[b]{0.475\textwidth}
      \centering
      \begin{tikzpicture}[scale=1.2]
        \input{./../../tikzlib/figs/square-law-transfer-vds-a.tex}
      \end{tikzpicture}
      \caption{$V_{\mathrm{DS}}=V_{\mathrm{DS,1}} < V_{\mathrm{T}}$}
  \end{subfigure}%
  \hfill
  \begin{subfigure}[b]{0.475\textwidth}
      \centering
      \begin{tikzpicture}[scale=1.2]
        \input{./../../tikzlib/figs/square-law-transfer-vds-b.tex}
      \end{tikzpicture}
      \caption{$V_{\mathrm{DS}}=V_{\mathrm{DS,2}} > V_{\mathrm{T}}$}
  \end{subfigure}
  \caption{Transfer characteristic $I_{\mathrm{D}} = f(V_{\mathrm{GS}})$}
  \label{fig:squarelawtransf}
\end{figure}

\section{Output Characteristic}

The \textit{output characteristic} explains the relation between the drain 
current $I_{\mathrm{D}}$ (=current at output) and the Drain-Source 
voltage $V_{\mathrm{DS}}$ (=voltage at output) while keeping 
$V_{\mathrm{GS}}$ constant.
We can illustrate that by drawing vertical lines in the 
$V_{\mathrm{GS}}$-$V_{\mathrm{DS}}$ plane in 
Fig.~\ref{fig:squarelawregionplotout}.
The three vertical lines in correspond to 
three different Gate-Source voltages.
$V_{\mathrm{GS,1}}$ is less than the threshold voltage 
$V_{\mathrm{T}}$, while $V_{\mathrm{GS,2}}$ and 
$V_{\mathrm{GS,3}}$ are greater.

\begin{figure}[H]
  \centering
  \begin{tikzpicture}[scale=1.2]
    \input{./../../tikzlib/figs/square-law-regions-sweep-vds-a.tex}
  \end{tikzpicture}
  \caption{Locus of output characteristic in the $V_{\mathrm{GS}}$-$V_{\mathrm{DS}}$ plane}
  \label{fig:squarelawregionplotout}
\end{figure}

Fig. \ref{fig:squarelawout} plots the output characteristic for the different
Gate-Source voltages shown in Fig.~\ref{fig:squarelawregionplotout}.
The drain current is zero for $V_{\mathrm{GS,1}}<V_{\mathrm{T}}$.
The output characteristic is a piecewise function for $V_{\mathrm{GS,2}}$
and $V_{\mathrm{GS,3}}$.
When $V_{\mathrm{DS}}$ is low, the output characteristic has a 
parabolic shape and is in the \textit{ohmic} mode.
As $V_{\mathrm{DS}}$ increases, the drain current $I_{\mathrm{D}}$
gets constant and is in \textit{saturation}.

\begin{figure}[H]
  \centering
  \begin{tikzpicture}[scale=1.2]
    \input{./../../tikzlib/figs/square-law-output-a.tex}
  \end{tikzpicture}
  \caption{Output characteristic $I_{\mathrm{D}} = f(V_{\mathrm{DS}})$}
  \label{fig:squarelawout}
\end{figure}

The boundary between \textit{ohmic} and \textit{saturation} 
(dashed line in Fig. \ref{fig:squarelawout}) is given by 
\begin{equation}
  V_{\mathrm{DS}} \stackrel{!}{=} V_{\mathrm{OV}} 
                  \stackrel{\eqref{eq:vov}}{=} V_{\mathrm{GS}} - V_{\mathrm{T}}.
\end{equation}

\section{Transconductance}\label{sec:gm}

The \textit{transconductance} $g_{\mathrm{m}}$ of the transistor is the 
derivative of the drain current $I_{\mathrm{D}}$ wrt. to 
$V_{\mathrm{GS}}$, evaluated at a given $V_{\mathrm{GS}}$.
(Fig.~\ref{fig:squarelaw-gm}).

\begin{figure}[H]
  \centering
  \begin{tikzpicture}[scale=1.2]
    \input{./../../tikzlib/figs/square-law-gm-a.tex}
  \end{tikzpicture} 
  \caption{Transconductance $g_{\mathrm{m}}$}
  \label{fig:squarelaw-gm}
\end{figure}

This value is needed for the \textit{small-signal analysis}.
In the \textit{saturation} region, the 
\textit{transconductance} $g_{\mathrm{m}}$ is given by \eqref{eq:gm}.

\begin{equation}\label{eq:gm}
g_{\mathrm{m}} = \frac{\mathrm{d} I_{\mathrm{D}}}{\mathrm{d} V_{\mathrm{GS}}} 
               = K' \ \frac{W}{L} (V_{\mathrm{GS}}-V_{\mathrm{T}}) 
               = \frac{2 I_{\mathrm{D}}}{V_{\mathrm{GS}}-V_{\mathrm{T}}}  
               = \frac{2 I_{\mathrm{D}}}{V_{\mathrm{OV}}}
               = \sqrt{2 K' \frac{W}{L} I_{\mathrm{D}}}
\end{equation}

\section{Channel Length Modulation}\label{sec:clm}

The ideal behavior of a \gls{mosfet} as explained above is affected by
several parasitic effects.
One major parasitic effect is \gls{clm}.

\medskip

We may describe this effect by multiplying the function of the ideal drain
current $I_{\mathrm{D}}$ in saturation \eqref{eq:id-saturation} with the term 
$ \left(1 + \lambda \left(V_{\mathrm{DS}}-V_{\mathrm{OV}}\right)\right)$.
Then, we get
\begin{equation}
 I_{\mathrm{D}} 
 = \underbrace{\frac{1}{2} \ K' \ \frac{W}{L} (V_{\mathrm{GS}}-V_{\mathrm{T}})^2}_{I_{\mathrm{D,sat}}} \ 
  \big(1 + \lambda \left(V_{\mathrm{DS}}-V_{\mathrm{OV}}\right)\big)
 = I_{\mathrm{D,sat}} \big(1 + \lambda \left(V_{\mathrm{DS}}-V_{\mathrm{OV}}\right)\big).
\end{equation}
$\lambda$ (unit \si{\per\volt}) is a technology parameter and decreases for 
bigger lengths $L$, i.e.
\begin{equation}
\lambda \sim \frac{1}{L}.
\end{equation}
The additional term converges to one (no effect) as we increase the
length.

\medskip

Fig.~\ref{fig:squarelaw-output-clm} shows the output characteristic 
including \gls{clm}.
The drain current $I_{\mathrm{D}}$ is not constant in \textit{saturation},
we see a linear increase.
We refer to the slope in \textit{saturation} as 
\textit{Drain-Source conductance} $g_{\mathrm{DS}}$ or 
\textit{output conductance} $g_{\mathrm{O}}$.
It is
\begin{equation}\label{eq:gds}
g_{\mathrm{DS}} = \frac{\mathrm{d} I_{\mathrm{D}}}{\mathrm{d} V_{\mathrm{DS}}} 
                = I_{\mathrm{D,sat}} \cdot \lambda.
\end{equation}

\begin{figure}[H]
  \centering
  \begin{tikzpicture}[scale=1.2]
    \input{./../../tikzlib/figs/square-law-output-clm-b.tex}
  \end{tikzpicture} 
  \caption{Output characteristic including \gls{clm}}
  \label{fig:squarelaw-output-clm}
\end{figure}

\section{Small-Signal Model}

With the definition made in the sections \ref{sec:gm} and \ref{sec:clm},
we can create a \textit{small-signal model} 
(Fig. \ref{fig:squarelaw-small-signal}).

\begin{figure}[H]
  \centering
  \begin{circuitikz}
    \input{./../../tikzlib/figs/mosfet-equivalent-circuit-d.tex}
  \end{circuitikz} 
  \caption{Small-signal model}
  \label{fig:squarelaw-small-signal}
\end{figure}


The drain current in the small signal model is
\begin{equation}\label{eq:id-ss}
\underline{I}_{\mathrm{D}} =  
g_{\mathrm{m}} \ \underline{V}_{\mathrm{GS}} 
+ g_{\mathrm{DS}} \ \underline{V}_{\mathrm{DS}}.
\end{equation}

An alternative small signal model is displayed in 
Fig.~\ref{fig:alt-squarelaw-small-signal}.

\begin{figure}[H]
  \centering
  \begin{circuitikz}
    \input{./../../tikzlib/figs/mosfet-equivalent-circuit-e.tex}
  \end{circuitikz} 
  \caption{Alternative small-signal model \cite[section 7.2.1]{seda-miccirc-20}}
  \label{fig:alt-squarelaw-small-signal}
\end{figure}

\printbibliography

\end{document}